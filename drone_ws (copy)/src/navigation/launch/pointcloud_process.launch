<?xml version="1.0"?>
<launch>
    <!-- 启动GPS滤波节点 -->
    <node pkg="navigation" type="gps_filter" name="gps_filter" output="screen"/>

    <!-- 启动tf_trans节点 -->
    <node pkg="navigation" type="tf_trans" name="tf_trans" output="screen"/>

    <!-- 启动tf_broadcaster节点 -->
    <node pkg="navigation" type="tf_broadcaster" name="tf_broadcaster" output="screen"/>

    <!-- 添加激光雷达的静态变换 -->
    <node pkg="tf" type="static_transform_publisher" name="lidar_broadcaster"
          args="0 0 0 0 0 0 drone_frame lidar 50" />

    <!-- 点云处理节点 -->
    <node pkg="navigation" type="pointcloud_process" name="pointcloud_process" output="screen">
        <!-- 点云滤波参数 -->
        <param name="voxel_leaf_size" value="0.1"/>
        <param name="mean_k" value="30"/>
        <param name="std_dev_mul_thresh" value="1.5"/>
        <param name="ground_distance_thresh" value="0.3"/>
        
        <!-- 聚类参数 -->
        <param name="cluster_tolerance" value="0.5"/>
        <param name="min_cluster_size" value="20"/>
        <param name="max_cluster_size" value="1000"/>
    </node>

    <!-- 启动RViz -->
    <node pkg="rviz" type="rviz" name="rviz" 
          args="-d $(find navigation)/rviz/drone_navigation.rviz"/>
</launch> 